jQuery.fn.extend({scrollIntoView:function(a){var b=this.get(0);return void 0!==b&&b.scrollIntoView&&b.scrollIntoView(a?a:!0),this}}),jQuery(function(a){String.prototype.updateQueryString=function(a,b){var c=this,d=new RegExp("([?|&])"+a+"=.*?(&|#|$)","i");if(c.match(d))return c.replace(d,"$1"+a+"="+b+"$2");var e="",f=-1!==c.indexOf("?")?"&":"?";return-1!==c.indexOf("#")&&(e=c.replace(/.*#/,"#"),c=c.replace(/#.*/,"")),c+f+a+"="+b+e};var b=function(a){},c=function(b){var c=(parent?parent:self).location,d="";if(b.success_return_url)d=b.success_return_url;else{d=c.href;for(var e in b)a.inArray(e,["error","message","message_type"])>-1||(d=d.updateQueryString(e,b[e]))}c.replace(d)};a("form.pid_ajax-form").submit(function(){var d={};if(a(this).find(":input[name]").each(function(){var b=a(this),c=b.attr("name");switch(b.attr("type")){case"checkbox":d[c]=b.is(":checked")?"Y":"N";break;default:d[c]=b.val()}}),/^\s*<p>.*<\/p>\s*$/i.test(d.content)){var e=d.content.toLowerCase(),f=e.indexOf("</p>"),g=e.lastIndexOf("</p>");f>0&&g>0&&f==g&&(d.content=content=d.content.replace(/^\s*<p>|<\/p>\s*$/gi,""))}return a.exec_json(d.mid+"."+d.act,d,c,b),!1}),a("a[href=#siManageBtn]").click(function(){a(".scElps ._first").each(function(){a(this).css("width",a(this).width()-30+"px")}),a(".scCheck").show("slow");var b=a(this).next();return a("select",b).change(function(){var b=a(this).val()||"",c=[];return a("input[name=cart]:checked").each(function(b){c[b]=a(this).val()}),c.length<1?alert("Please select the items.")||!1:void exec_xml("beluxe","procBeluxeChangeCustomStatus",{mid:current_mid,new_value:b,target_srls:c.join(",")},completeCallModuleAction)}),a("a[data-type]",b).click(function(){switch(a(this).attr("data-type")){case"manage":popopen(request_uri+"?module=document&act=dispDocumentManageDocument","manageDocument");break;case"admin":location.href=current_url.setQuery("act","dispBeluxeAdminModuleInfo")}return!1}),b.show("slow"),a(this).hide().prevAll().hide(),!1}),a("#siCat.tabn,#siCat.colm").each(function(){var b=a(this),c=b.hasClass("colm"),d=a("ul",this),e=a("li.active:last",this),f=parseInt(d.css("margin-top"))||0,g=parseInt(d.height())-f,h=parseInt(a("li:first",this).height())+parseInt(a("li:first",this).css("margin-bottom")),i=parseInt((e.position(b)?e.position(b).top:0)/h);if(i>0&&d.css("margin-top",i*h*-1+"px"),h>=g?(a(".scCaNavi",this).css("display","none"),d.css("margin-right",c?"18px":"0")):(a(".scCaNavi a:eq(0)",this).click(function(){var a=parseInt(d.css("margin-top"));return f>a&&d.css("margin-top",a+h+f+"px"),!1}),a(".scCaNavi a:eq(1)",this).click(function(){var a=parseInt(d.css("margin-top"));return a-h-f>-g&&d.css("margin-top",a-h-f+"px"),!1})),c){var j=a("#siLst:not(.noheader):eq(0), #siHrm:not(.noheader):eq(0)"),k=a(".scCaLock",this),l=getCookie("scCaLock");if(!j.length)return;j.length>1&&(j=a(j.get(0))),b.css({display:"none",visibility:"visible"}),b.css({top:j.position().top+"px",width:j.width()-10+"px"}),k&&(k.click(function(){return a(this).hasClass("active")?(a(this).removeClass("active"),setCookie("scCaLock","hide",null,"/")):(a(this).addClass("active"),setCookie("scCaLock","",null,"/")),!1}),"hide"==l&&k.removeClass("active")),"true"==b.attr("data-autohide")&&(a("thead tr:first th:not(.sort), ul.scFrm:first",j).mouseenter(function(c){var d=c.target,e=a("> span.sort:eq(0)",d);e.length&&c.offsetX>e.position().left||b.trigger("fadeIn.fast")}),a(document).mousemove(function(c){var d=c.target;a(d).parents().add(d).index(b)>-1||b.is(":hidden")||"1"!=b.css("opacity")||k.hasClass("active")||b.fadeOut()})),b.bind("fadeIn.fast",function(){a(this).css({top:j.position().top+"px",width:j.width()-10+"px"}).fadeIn("fast")}).bind("fadeOut.fast",function(){b.fadeOut()})}}),a("#siCat.side").each(function(){var b=a(this),c=a(".cateArea",b),d=a("ul.scFrm",b),e=a(".mubtn",b);e.click(function(){var a=d.outerWidth(!0),b=e.outerWidth(!0)+1;return c.hasClass("right")&&c.css({"margin-left":-(a+b)+"px",width:a+b+"px"}),d.animate({width:"toggle",opacity:"toggle"},"slow",function(){d.is(":hidden")?(e.removeClass("active"),c.hasClass("right")&&c.css({"margin-left":-b+"px",width:b+"px"})):e.addClass("active")}),!1}),a("ul.scFrm li[data-child]",b).each(function(){var f=a(this).attr("data-child"),g=a("ul.scFrm li[data-parent="+f+"]",b);a("a b:first",this).click(function(){if(c.hasClass("right")&&c.css({"margin-left":"-1000px",width:"1000px"}),a(this).html(g.is(":hidden")?"&rsaquo;":"&lsaquo;"),g.slideToggle(),c.hasClass("right")){var b=d.outerWidth(!0),f=e.outerWidth(!0)+1;c.css({"margin-left":-(b+f)+"px",width:b+f+"px"})}return!1}).css("color","black").html("none"==g.css("display")?"&lsaquo;":"&rsaquo;")})}),a("#siLst.gall .scInfo[data-autohide=true]").each(function(){var b=a(this),c=b.closest(".scItem"),d=a(".nick_name",this),e=b.prev("span.prtImg"),f="true"==b.attr("data-fade");c.mouseenter(function(a){e.hide("slow"),f?b.fadeIn("slow"):b.slideDown(),d.show("slow")}).mouseleave(function(a){d.hide("slow"),f?b.fadeOut():b.slideUp(),e.show("slow")})}),a("label p.scItemDesc[data-target]").each(function(){var b=a(this),c=b.attr("data-target"),d=a("label #"+c);d.focusin(function(){b.fadeOut("fast")}).focusout(function(){d.val()&&b.fadeIn("slow")})}),a(".scSns a").click(function(){var b,c=a("#siHrm li.scElps strong:eq(0)"),d=a(this).attr("data-type"),e=encodeURIComponent(c.text().trim()),f=encodeURIComponent(c.attr("title"));switch(d){case"me":b="http://me2day.net/posts/new?new_post[body]=%22"+e+"%22%3A"+f;break;case"fa":b="http://www.facebook.com/share.php?t="+e+"&u="+f;break;case"de":b="http://www.delicious.com/save?v=5&noui&jump=close&url="+f+"&title="+e;break;default:b="http://twitter.com/home?status="+e+" "+f}return popopen(b,"_pop_sns"),!1}),a("a[href=#tbk_action][class=delete]").click(function(){if(!confirm("Do you want to delete the selected trackback?"))return!1;var b=a(this).closest("li").find("a[name^=trackback_]").attr("name").replace(/.*_/g,"");return exec_xml("beluxe","procBeluxeDeleteTrackback",{mid:current_mid,trackback_srl:b},completeCallModuleAction),!1}),a("a[href=#history][data-srl]").click(function(){var b=a(this).attr("data-srl")||0;return popopen(request_uri+"?mid="+current_mid+"&act=dispBoardHistory&history_srl="+b+"&is_poped=1","documentHistory"),!1}),a("a[href=#his_action][data-mode=delete][data-srl]").click(function(){if(!confirm("Do you want to delete the selected history?"))return!1;var b=a(this).attr("data-srl")||0,c=a(this).attr("data-doc")||0;return exec_xml("beluxe","procBeluxeDeleteHistory",{mid:current_mid,history_srl:b,document_srl:c},completeCallModuleAction),!1}),a("a[href^=#][href$=recommend][data-type]").click(function(){var b=a(this),c=b.attr("href"),d=b.attr("data-type"),e=b.attr("data-srl"),f={target_srl:e,cur_mid:current_mid,mid:current_mid};return exec_xml(d,"#recommend"==c?"proc"+d.ucfirst()+"VoteUp":"proc"+d.ucfirst()+"VoteDown",f,function(a){if(alert(a.message),0===a.error){var d=b.find("em.cnt");d.text((parseInt(d.text())||0)+("#recommend"==c?1:-1))}}),!1}),a("a[href=#declare][data-type]").click(function(){var b=a(this),c=b.attr("data-type"),d=b.attr("data-srl"),e=b.attr("data-rec")||"0",f={target_srl:d,cur_mid:current_mid,mid:current_mid},g=(prompt(sj_declare_message,"")||"").trim();return g?(exec_xml(c,"proc"+c.ucfirst()+"Declare",f,function(a){if(alert(a.message),0===a.error){if("0"==e)return location.reload()||!1;var b="[Board DX] Declare, "+c+":"+d,f=current_url.setQuery("comment_srl",d);g=g+'<br /><br /><a href="'+f+'">'+f+"</a>";var h={receiver_srl:e,title:b,content:g};exec_xml("communication","procCommunicationSendMessage",h,function(a){alert(a.message),location.reload()})}}),!1):alert("Cancel")||!1}),a("#siFbk .scFbWt form textarea[name=content]").focus(function(){a(".scWusr",a(this).closest("form")).show("slow")}),a(".scHLink[data-href]").click(function(){return window.open(a(this).attr("data-href"),a(this).attr("data-target")||""),!1}),a(".scToggle[data-target]").click(function(){return a(a(this).attr("data-target")).slideToggle(),!1}),a(".scClipboard").click(function(){var b=a(this).attr("data-attr")||!1;return prompt("press CTRL+C copy it to clipboard...",b?a(this).attr(b):a(this).text()),!1}),a.browser.msie===!0&&Math.floor(a.browser.version)<9&&a("#siLst thead tr th:not(hidden):last div").css("border-right-width","1px"),a(window).load(function(){a(".scElps[data-active=true]").each(function(b){var c=a(this),d=a("> :eq(0)",c),e=a("> :eq(1)",c),f=c.width(),g=0;e.length&&(a("> img",e).length||e.text().trim()?g=e.addClass("_last").outerWidth(!0):e.remove()),a.browser.msie===!0&&d.height(c.css("line-height")||15),d.css("width",f-g-5+"px").addClass("_first")}),a(".scContent [data-hottrack]").each(function(b){var c=a(this),d=c.attr("data-index"),e=c.attr("data-type"),f=c.attr("data-hottrack"),g=a('<a class="scHotTrack" />').attr("data-index",d).attr("href",f),h=c.outerWidth("gall"!=e)-("widg"==e?8:4),i=c.outerHeight("webz"==e)+("lstcont"==e?a("#siHotCont_"+d).height():0)-4;if(g.css({width:h+"px",height:i+"px"}),"TR"==c.get(0).tagName){var j=c.find(">td:eq(0)");if(a.browser.mozilla===!0){var k=a("<span>").css({position:"relative",display:"block"}).css({"padding-left":j.css("padding-left"),"padding-top":j.css("padding-top")}).html(j.html());g.prependTo(k.prependTo(j.html("").css({"padding-left":"0","padding-top":"0","vertical-align":"top"})))}else g.prependTo(j.css({position:"relative"}))}else g.prependTo(c);a.browser.msie===!0&&a('<span class="iefix" />').css({width:h+"px",height:i+"px"}).appendTo(g)}),a(".pidModalAnchor").bind("before-open.mw",function(b){var c,d,e,f,g,h,i,j=a(this);if(c=j.attr("data-modal-act")||"",d=j.attr("data-modal-param")||"",c||d){for(f=d.split(","),h=f.length-1,i=f.length>0&&"true"==f[0]?1:0,e=i?default_url:current_url,e=e.setQuery("act",c),i&&(e=e.setQuery("mid",current_mid)),g=i;h>g;g+=2)e=e.setQuery(f[g],f[g+1]||"");j.data("goUrl",e)}}).bind("after-close.mw",function(b){a(".pid_modal-body",a(a(this).attr("href"))).css({top:0,left:"-150%",height:0})}),a(".pidModalChilds[data-modal-child=close]").click(function(){var b=a(a(this).attr("href"),(parent?parent:self).document);b.find("button.pid_modal-close:first").click()}),"hide"!=getCookie("scCaLock")&&a("#siCat.colm").trigger("fadeIn.fast"),a("#siFbk a[name^=comment][data-scroll=true]").last().parent().scrollIntoView();var b=(getCookie("dx_write_mode")||"").split("/");if(b.length){setCookie("dx_write_mode","",null,"/");var c="a.pidModalAnchor[href=#siModalWin][data-mode=";"comment"==b[0]?a(c+b[1]+"][data-type=comment]",a("a[name=comment_"+b[2]+"]").closest("li")).click():("insert"==b[0]||"update"==b[0]||"delete"==b[0])&&a(c+b[0]+"][data-type!=comment]").click()}a("#siWrt select.scWcateList").change(function(){var b=a(this).val(),c=a(this).data("key"),d=a("select.scWcateList[data-key="+c+"]"),e=a("select.scWcateList[data-key="+b+"]");a(this).data("key",b),a("input:hidden[name=category_srl]").val(b),a("select.scWcateList[data-key="+d.data("key")+"]").hide("slow"),d.hide("slow"),e.find(">option").length&&e.change().show("slow")}),a("#siWrt input:hidden[name=category_srl]").each(function(){var b,c=a(this).val(),d=0;if(void 0!==c&&c>0){for(b=a("select.scWcateList option[value="+c+"]").closest("select");b&&(b.data("key",c).val(c),c=b.show().attr("data-key"),void 0!==c&&c&&!(d++>9)););b.change()}else a("select.scWcateList:eq(0)").change()}),a("#siWrt .scWul.extraKeys li.scWli:hidden:eq(0)").each(function(){a("#siWrt .scExTog:hidden").show().click(function(){a("#siWrt .scWul.extraKeys li.scWli:hidden").show("slow"),a(this).hide()})}),a("#insert_filelink a[href=#insert_filelink]").click(function(){var b=a(this).closest("#insert_filelink").find("> input"),c=b.val(),d=a(this).attr("data-seq"),e=a(this).attr("data-srl");return void 0!==c&&c?(exec_xml("Beluxe","procBeluxeInsertFileLink",{mid:current_mid,sequence_srl:d,document_srl:e,filelink_url:c},function(a){reloadFileList(uploaderSettings[a.sequence_srl])},["error","message","sequence_srl"]),!1):(alert("Please enter the file url.\nvirtual type example: http://... #.mov"),b.focus(),!1)})})}),jQuery(function(a){a.fn.extend({everyTime:function(b,c,d,e){return this.each(function(){a.timer.add(this,b,c,d,e)})},oneTime:function(b,c,d){return this.each(function(){a.timer.add(this,b,c,d,1)})},stopTime:function(b,c){return this.each(function(){a.timer.remove(this,b,c)})}}),a.extend({timer:{global:[],guid:1,dataKey:"jQuery.timer",regex:/^([0-9]+(?:\.[0-9]*)?)\s*(.*s)?$/,powers:{ms:1,cs:10,ds:100,s:1e3,das:1e4,hs:1e5,ks:1e6},timeParse:function(b){if(void 0===b||null===b)return null;var c=this.regex.exec(a.trim(b.toString()));if(c[2]){var d=parseFloat(c[1]),e=this.powers[c[2]]||1;return d*e}return b},add:function(b,c,d,e,f){var g=0;if(a.isFunction(d)&&(f||(f=e),e=d,d=c),c=a.timer.timeParse(c),!("number"!=typeof c||isNaN(c)||0>c)){("number"!=typeof f||isNaN(f)||0>f)&&(f=0),f=f||0;var h=a.data(b,this.dataKey)||a.data(b,this.dataKey,{});h[d]||(h[d]={}),e.timerID=e.timerID||this.guid++;var i=function(){(++g>f&&0!==f||e.call(b,g)===!1)&&a.timer.remove(b,d,e)};i.timerID=e.timerID,h[d][e.timerID]||(h[d][e.timerID]=window.setInterval(i,c)),this.global.push(b)}},remove:function(b,c,d){var e=a.data(b,this.dataKey),f=null;if(e){if(c){if(e[c]){if(d)d.timerID&&(window.clearInterval(e[c][d.timerID]),delete e[c][d.timerID]);else for(var g in e[c])window.clearInterval(e[c][g]),delete e[c][g];for(f in e[c])break;f||(f=null,delete e[c])}}else for(c in e)this.remove(b,c,d);for(f in e)break;f||a.removeData(b,this.dataKey)}}}}),a(window).bind("unload",function(){a.each(a.timer.global,function(b,c){a.timer.remove(c)})}),a.fn.pidModalResize=function(b){var d=a(this),e=d.data("target")||"",f=d.data("frame_id")||"pidOframe";b=b||"auto",a("#"+f,d).each(e?function(){var b=a(this),c=b.get(0).contentDocument||b.get(0).contentWindow.document;if(void 0!==c){var e=a("body",c),f=a("form:first",e);e.css({padding:"0",margin:"0",overflow:"hidden"}),f.css({padding:"0",margin:"0",overflow:"hidden"}),b.height(e.outerHeight(!0)),d.everyTime(500,"time_resize_event2",function(a){if(d.is(":hidden")||!b.length){if(d.stopTime("time_resize_event2"),!b.length)return;return void b.css("height","")}b.height(e.outerHeight(!0))})}}:function(){var e=a(this),f=a(parent),g=e.get(0).contentDocument||e.get(0).contentWindow.document;if(void 0!==g){var h=a("body",g),i=a("form:first",h);h.css({padding:"0",margin:"0",overflow:"hidden"}),i.css({padding:"0",margin:"0",overflow:"hidden"}),"hfix"==b&&h.height(f.height()-100),e.height(h.outerHeight(!0)),d.everyTime(500,"time_resize_event",function(b){var g=a(".pid_modal-body:eq(0)",d);if(d.is(":hidden")||!e.length)return void d.stopTime("time_resize_event");var i=f.height()-100,j=h.outerHeight(!0);h.css("overflow-y",i>j?"hidden":"auto"),e.css({height:i>j?j:i,width:f.width()-80}),g.height(e.outerHeight(!0));var k=(f.height()-g.outerHeight())/2-10;c={top:(k>10?k:10)+"px",left:(f.width()-g.outerWidth())/2+"px"},g.position().left<0?g.animate(c):g.css(c)})}}),a("[data-modal-child=message]",parent.document).fadeOut(2500,function(){a(this).remove()})}}),jQuery.fn.pidModalFlashFix=function(){var a=jQuery;a("embed[type*=flash]",this).each(function(){var b=a(this);"transparent"!=b.attr("wmode"),b.attr("wmode","opaque")}),a("iframe[src*=youtube]",this).each(function(){var b=a(this);b.attr("src",b.attr("src").setQuery("wmode","opaque"))})},jQuery(function(a){var b=27,c=[],d=1040,e=a('<div class="pid_modal-backdrop" style="width:100%;height:100%"></div>').appendTo("body").hide();a.fn.pidModalWindow=function(){this.not(".pid_modal-window").addClass("pid_modal-window").each(function(){a(a(this).attr("href")).hide()}).click(function(){var b,c=a(this);return b=a(c.attr("href")),c.trigger("showing"==b.data("state")?"close.mw":"open.mw"),!1}).bind("open.mw",function(){function f(){k.trigger("after-open.mw")}var g,h,i,j,k=a(this),l=k.attr("data-target")||"";if(g=a(k.attr("href")),!c.length||c[c.length-1].get(0)!=g.get(0)){if(l||g.parent("body").length?l&&("showing"==g.data("state")&&k.trigger("close.mw"),a(l).before(g),g.data("target",l)):(h=a('<button type="button" class="pid_modal-close">&times;</button>'),h.click(function(){g.data("anchor").trigger("close.mw")}),g.find("[data-modal-hide]").click(function(){g.data("anchor").trigger("close.mw")}),a("body").append(g),g.prepend(h)),g.data("anchor",k),i=a.Event("before-open.mw"),k.trigger(i),i.isDefaultPrevented())return!1;if(j=k.data("duration")||"fast",g.data("state","showing"),(!l||l&&a("[data-modal-hide]",g).length)&&a(document).bind("keydown.mw",function(a){return a.which==b?(k.trigger("close.mw"),!1):void 0}),g.fadeIn(j,f).find("button.pid_modal-close:first").focus(),a("body").css("overflow","hidden"),l)a(l).hide("fast");else{c.push(g);var m=d+2*(c.length-1);e.css("z-index",m).show();var n=e.height(),o=n;o-=g.find(".pid_modal-header:visible").height(),o-=g.find(".pid_modal-footer:visible").height(),o-=150,g.find(".pid_modal-body").css("height",o),g.css("z-index",m+1)}}}).bind("close.mw",function(){function b(){j.trigger("after-close.mw")}var f,g,h,i,j=a(this);if(g=a(j.attr("href")),!c.length||c[c.length-1].get(0)==g.get(0)){if(f=a.Event("before-close.mw"),j.trigger(f),f.isDefaultPrevented())return!1;if(h=j.data("duration")||"fast",g.data("state","hiding"),g.fadeOut(h,b),a("body").css("overflow","auto"),j.focus(),i=g.data("target")||"")a(i).show("fast");else{c.pop();var k=d+2*(c.length-1);c.length?e.css("z-index",k):e.hide()}}})},a.fn.pidModalGoUrl=function(b){var c,d=a(this),e=d.attr("data-modal-frame")||"pidOframe",f=d.data("target")?a(window).scrollTop():0;return d.data("frame_id",e),a(".wait[data-modal-child=message]").length||(c=a('<div class="message update wait">').html("<p>"+waiting_message+'<br />If time delays continue, <a href="'+b.setQuery("is_modal","0")+'"><b>click here</b></a>.</p>').attr("data-modal-child","message").css({position:"absolute",left:"10px","z-index":"9"}).css("top",f+10+"px"),d.append(c)),"string"!=typeof scroll&&(scroll=""),b=b.setQuery("is_modal","1"),/msie|chromium/.test(navigator.userAgent.toLowerCase())===!0?a("#"+e,d).length?window.frames[e].location.replace(b):a('<iframe id="'+e+'" allowTransparency="true" frameborder="0" scrolling="'+(scroll?scroll:"auto")+'" />').attr("src",b).appendTo(a(".pid_modal-body:eq(0)",d)).load(function(a){d.pidModalResize(d.attr("data-modal-resize"))}):("no"==scroll&&(scroll="hidden"),a("#"+e,d).length?a("#"+e,d).attr("data",b):a('<object id="'+e+'" style="overflow-x:hidden;overflow-y:'+(scroll?scroll:"auto")+'" />').attr("data",b).appendTo(a(".pid_modal-body:eq(0)",d)).load(function(){d.pidModalResize(d.attr("data-modal-resize"))}))},a(".pidModalAnchor").bind("after-open.mw",function(b){var c=a(this),d=c.data("goUrl")||"";d&&a(c.attr("href")).pidModalGoUrl(d)}).bind("before-close.mw",function(b){var c=a(a(this).attr("href"));a("[data-modal-child]",c).remove(),a(".pid_modal-body",c).children().remove()}).pidModalWindow()});